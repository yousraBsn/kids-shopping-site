let WPFormsPagesPrivacyCompliance=window.WPFormsPagesPrivacyCompliance||((n,l)=>{let i={},o={init:()=>{l(o.ready)},ready:()=>{o.initVars(),o.events()},initVars:()=>{i={$stepInstall:l("section.step-install"),$stepInstallNum:l("section.step-install .num img"),$stepSetup:l("section.step-setup"),$stepSetupNum:l("section.step-setup .num img"),$stepAddon:l("section.step-addon"),$stepAddonNum:l("section.step-addon .num img")}},events:()=>{i.$stepInstall.on("click","button",o.stepInstallClick),i.$stepSetup.on("click","button",o.gotoURL),i.$stepAddon.on("click","button",o.gotoURL)},stepInstallClick:e=>{let a=l(e.currentTarget);if(!a.hasClass("disabled")){let s=a.attr("data-action"),t="";switch(s){case"activate":t="wpforms_activate_addon",a.text(wpforms_pluginlanding.activating);break;case"install":t="wpforms_install_addon",a.text(wpforms_pluginlanding.installing);break;case"goto-url":return void(n.location.href=a.attr("data-url"));default:return}a.addClass("disabled"),o.showSpinner(i.$stepInstallNum);e=a.attr("data-plugin"),e={action:t,nonce:wpforms_admin.nonce,plugin:e,type:"plugin"};l.post(wpforms_admin.ajax_url,e).done(function(t){o.stepInstallDone(t,a,s)}).always(function(){o.hideSpinner(i.$stepInstallNum)})}},stepInstallDone:(t,s,e)=>{var a;("install"===e?t.success&&t.data.is_activated:t.success)?(i.$stepInstallNum.attr("src",i.$stepInstallNum.attr("src").replace("step-1.","step-complete.")),s.addClass("grey").removeClass("button-primary").text(wpforms_pluginlanding.activated),o.stepInstallPluginStatus()):(e=(t="install"===e&&t.success&&!t.data.is_activated||"activate"===e)?wpforms_pluginlanding.wpconsent_manual_activate_url:wpforms_pluginlanding.wpconsent_manual_install_url,a=t?wpforms_pluginlanding.error_could_not_activate:wpforms_pluginlanding.error_could_not_install,t=t?wpforms_pluginlanding.plugins_page:wpforms_pluginlanding.download_now,s.removeClass("grey disabled").text(t).attr("data-action","goto-url").attr("data-url",e),s.after('<p class="error">'+a+"</p>"))},stepInstallPluginStatus:()=>{var t={action:"wpforms_privacy_compliance_page_check_plugin_status",nonce:wpforms_admin.nonce};l.post(wpforms_admin.ajax_url,t).done(o.stepInstallPluginStatusDone)},stepInstallPluginStatusDone:t=>{t.success&&(i.$stepSetup.removeClass("grey"),i.$stepSetupBtn=i.$stepSetup.find("button"),0<t.data.setup_status?(i.$stepSetupNum.attr("src",i.$stepSetupNum.attr("src").replace("step-2.svg","step-complete.svg")),i.$stepAddon.removeClass("grey"),i.$stepAddonBtn=i.$stepAddon.find("button"),"pro"===t.data.license_level?(i.$stepAddonBtn.text(wpforms_pluginlanding.activated_pro),i.$stepAddonNum.attr("src",i.$stepAddonNum.attr("src").replace("step-3.svg","step-complete.svg"))):(i.$stepAddonBtn.attr("data-url",t.data.step3_button_url),i.$stepAddonBtn.removeClass("grey disabled").addClass("button-primary"))):i.$stepSetupBtn.removeClass("grey disabled").addClass("button-primary"))},gotoURL:t=>{var t=l(t.currentTarget),s=t.attr("data-url");!t.hasClass("disabled")&&s&&(n.location.href=s)},showSpinner:t=>{t.siblings("i.loader").removeClass("hidden")},hideSpinner:t=>{t.show(),t.siblings("i.loader").addClass("hidden")}};return o})((document,window),jQuery);WPFormsPagesPrivacyCompliance.init();